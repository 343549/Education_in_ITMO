# Отчет по лабораторной работе 4

## Ф.И.О. студента
**Джафари Хоссаин**

## Название практической работы
**Моделирование структуры информационной системы с помощью UML-диаграмм**

## Постановка задачи

В данной работе предстояло смоделировать структуру информационной системы с помощью UML-языка: диаграммы классов или диаграммы компонентов. 

**Требования к работе:**
- Число компонент или классов не менее пяти
- Для диаграммы компонент должно быть хотя бы одна вложенность
- Отображение баз данных или иных элементов - в соответствии с требованиями к системе
- К диаграмме должны быть даны пояснения в форме 5-10 предложений
- Допускается использование больших языковых моделей и язык скриптов через PlantUML
- Полученная за счет генерации модель должна быть хотя бы частично отредактирована
- Внесенные изменения должны быть описаны

**Выбранная тема:** Модуль аналитики и прогнозирования системы EcoGuardian

Система EcoGuardian представляет собой интеллектуальную систему мониторинга экологической обстановки, предназначенную для обработки потоковых данных с сетевых датчиков, выявления аномалий, построения прогнозных моделей и формирования предупреждений о потенциальных экологических угрозах.

---

## Диаграммы полученной модели

### 1. Диаграмма компонентов модуля аналитики и прогнозирования системы EcoGuardian

![Диаграмма компонентов]<img width="2838" height="786" alt="ecoguardian_components" src="https://github.com/user-attachments/assets/e305e25c-8ce5-4a2b-95b1-88dee6aef69a" />


Диаграмма компонентов отображает архитектуру модуля аналитики и прогнозирования системы EcoGuardian, разделенную на три основных пакета. Первый пакет "Интерфейс пользователя" содержит компоненты для взаимодействия с пользователями через веб-браузер, API Gateway как единую точку входа для всех клиентских запросов и дашборд визуализации для отображения аналитических данных, прогнозов и предупреждений в реальном времени. Второй пакет "Модуль аналитики" включает четыре основных сервиса с вложенными компонентами: движок потоковой обработки (с компонентами приема данных, валидации и агрегации), сервис анализа (с детектором аномалий и модулем статистического анализа), сервис прогнозирования (с ML-моделью и оценкой точности) и сервис оповещений (с генератором предупреждений и маршрутизацией уведомлений). Третий пакет "Хранилище данных" содержит две базы данных: базу данных мониторинга (с таблицами показаний датчиков и метаданных датчиков) и базу моделей и результатов (с таблицами ML-моделей, прогнозов и результатов анализа). Все компоненты модуля аналитики взаимодействуют с соответствующими базами данных через SQL-запросы, обеспечивая разделение ответственности и модульность системы. Вложенность компонентов демонстрируется на примере всех четырех сервисов, которые содержат подкомпоненты для выполнения специфических задач экологического мониторинга, что позволяет улучшить масштабируемость и поддерживаемость системы.

**Структура компонентов:**
- **Интерфейс пользователя**: 3 компонента (Веб-клиент, API Gateway, Дашборд визуализации)
- **Модуль аналитики**: 4 основных сервиса с вложенными компонентами (всего 12 компонентов)
- **Хранилище данных**: 2 базы данных с вложенными таблицами (всего 5 таблиц)

**Общее количество компонентов: 20** (требование: не менее 5 - выполнено)

### 2. Диаграмма классов модуля аналитики и прогнозирования системы EcoGuardian

![Диаграмма классов]<img width="1728" height="1323" alt="ecoguardian_classes" src="https://github.com/user-attachments/assets/585d510f-b1d4-45e5-be34-e220debacc74" />


Диаграмма классов представляет объектную модель модуля аналитики и прогнозирования системы EcoGuardian, разделенную на два основных пакета. Первый пакет "Модель данных" содержит шесть основных классов: SensorReading (представление показаний датчика с методами валидации и нормализации), Sensor (информация о датчике с методами управления состоянием), Forecast (прогноз экологической угрозы с оценкой вероятности и уровня риска), MLModel (машинная модель с методами обучения, предсказания и оценки точности), Anomaly (обнаруженная аномалия с методами управления статусом) и Alert (предупреждение с методами отправки и подтверждения). Второй пакет "Сервисы" включает четыре класса сервисов: DataCollectionService (сбор и валидация данных с датчиков), AnalysisService (обнаружение аномалий и статистический анализ), ForecastingService (генерация прогнозов с использованием ML-моделей) и NotificationService (создание и отправка предупреждений). Связи между классами демонстрируют зависимости: SensorReading связан с Sensor (показания принадлежат датчику), Forecast связан с Sensor и MLModel (прогноз создается для датчика с использованием модели), Anomaly связан с SensorReading (аномалия обнаружена в показаниях), Alert связан с Forecast и Anomaly (предупреждения создаются на основе прогнозов и аномалий). Сервисы используют классы модели данных для выполнения своих функций, что обеспечивает четкое разделение ответственности между слоями приложения.

**Структура классов:**
- **Модель данных**: 6 классов
- **Сервисы**: 4 класса

**Общее количество классов: 10** (требование: не менее 5 - выполнено)

---

## Рефлективное заключение

В ходе выполнения лабораторной работы были созданы две UML-диаграммы для модуля аналитики и прогнозирования системы EcoGuardian: диаграмма компонентов и диаграмма классов. Работа позволила углубить понимание принципов проектирования архитектуры информационных систем и применения различных типов UML-диаграмм для моделирования сложных систем с разных точек зрения.

Основные достижения работы:
- Создана детальная диаграмма компонентов с 20 компонентами, что значительно превышает минимальное требование в 5 компонентов
- Реализована вложенность компонентов на двух уровнях: в сервисах модуля аналитики и в базах данных
- Разработана логичная архитектура, разделенная на три уровня: интерфейс пользователя, бизнес-логика и хранилище данных
- Создана диаграмма классов с 10 классами, демонстрирующая объектную модель системы
- Продемонстрировано понимание принципов разделения ответственности и модульности системы
- Показано соответствие диаграмм техническому заданию из lab3.md

Использование PlantUML позволило создать читаемые и структурированные диаграммы, которые легко поддерживать и модифицировать. Работа с языковой моделью для генерации базовой структуры показала эффективность использования современных инструментов ИИ в процессе проектирования, однако важность ручной доработки и адаптации под конкретную предметную область стала очевидной.

В процессе работы были изучены принципы моделирования компонентной архитектуры и объектно-ориентированного проектирования, особенности отображения баз данных в UML-диаграммах, способы представления вложенности компонентов и связи между классами. Полученный опыт будет полезен при проектировании реальных информационных систем в будущем, особенно при работе с системами обработки больших данных и машинного обучения.

---

## Бонусная часть

### Промпт для языковой модели

```
Создай UML-диаграмму компонентов для модуля аналитики и прогнозирования системы EcoGuardian на языке PlantUML. 
EcoGuardian - это интеллектуальная система мониторинга экологической обстановки. Модуль должен включать:
- API-шлюз для приема запросов
- Движок потоковой обработки данных с датчиков
- Сервис анализа с детектором аномалий
- Сервис прогнозирования с ML-моделями
- Сервис оповещений
- Базы данных для хранения данных мониторинга и результатов анализа

Требования:
1. Не менее 5 компонентов
2. Должна быть хотя бы одна вложенность компонентов
3. Должны быть отображены базы данных с таблицами
4. Система должна быть разделена на логические пакеты (интерфейс пользователя, модуль аналитики, хранилище данных)
5. Покажи связи между компонентами с указанием типов взаимодействия
6. Добавь заметки для вложенных компонентов
7. Учти требования из технического задания: потоковая обработка, ML, оповещения
```

### Ответ в форме скрипта

Скрипты PlantUML сохранены в файлах:
- `ecoguardian_components.puml` - диаграмма компонентов
- `ecoguardian_classes.puml` - диаграмма классов

Ниже представлен полный код скрипта для диаграммы компонентов:

```plantuml
@startuml
!theme plain
skinparam componentStyle rectangle
skinparam linetype ortho

title Диаграмма компонентов модуля аналитики и прогнозирования системы EcoGuardian

package "Интерфейс пользователя" {
    component [Веб-клиент] as WebClient
    component [API Gateway] as APIGateway
    component [Дашборд визуализации] as Dashboard
}

package "Модуль аналитики" {
    component [Движок потоковой обработки] as StreamEngine {
        component [Прием данных] as DataReceiver
        component [Валидация данных] as DataValidator
        component [Агрегация данных] as DataAggregator
    }
    
    component [Сервис анализа] as AnalysisService {
        component [Детектор аномалий] as AnomalyDetector
        component [Статистический анализ] as StatisticalAnalysis
    }
    
    component [Сервис прогнозирования] as ForecastingService {
        component [ML-модель] as MLModel
        component [Оценка точности] as AccuracyAssessment
    }
    
    component [Сервис оповещений] as NotificationService {
        component [Генератор предупреждений] as AlertGenerator
        component [Маршрутизация уведомлений] as NotificationRouter
    }
}

package "Хранилище данных" {
    database "База данных мониторинга" as MonitoringDB {
        component [Таблица показаний датчиков] as SensorReadingsTable
        component [Таблица метаданных датчиков] as SensorMetadataTable
    }
    
    database "База моделей и результатов" as ModelsDB {
        component [Таблица моделей ML] as MLModelsTable
        component [Таблица прогнозов] as ForecastsTable
        component [Таблица результатов анализа] as AnalysisResultsTable
    }
}

' Связи между компонентами
WebClient --> APIGateway : HTTP/HTTPS
APIGateway --> Dashboard : REST API
APIGateway --> StreamEngine : REST API
APIGateway --> AnalysisService : REST API
APIGateway --> ForecastingService : REST API
APIGateway --> NotificationService : REST API

Dashboard --> AnalysisService : Запрос данных
Dashboard --> ForecastingService : Запрос прогнозов
Dashboard --> NotificationService : Получение предупреждений

StreamEngine --> DataReceiver
StreamEngine --> DataValidator
StreamEngine --> DataAggregator
DataReceiver --> MonitoringDB : Запись данных
DataValidator --> MonitoringDB : Проверка данных
DataAggregator --> MonitoringDB : SQL запросы

AnalysisService --> AnomalyDetector
AnalysisService --> StatisticalAnalysis
AnomalyDetector --> MonitoringDB : SQL запросы
AnomalyDetector --> ModelsDB : Запись результатов
StatisticalAnalysis --> MonitoringDB : SQL запросы
StatisticalAnalysis --> ModelsDB : Запись результатов

ForecastingService --> MLModel
ForecastingService --> AccuracyAssessment
MLModel --> MonitoringDB : SQL запросы
MLModel --> ModelsDB : Загрузка моделей
MLModel --> ModelsDB : Запись прогнозов
AccuracyAssessment --> ModelsDB : SQL запросы

NotificationService --> AlertGenerator
NotificationService --> NotificationRouter
AlertGenerator --> ModelsDB : SQL запросы
NotificationRouter --> Dashboard : WebSocket

MonitoringDB --> SensorReadingsTable
MonitoringDB --> SensorMetadataTable
ModelsDB --> MLModelsTable
ModelsDB --> ForecastsTable
ModelsDB --> AnalysisResultsTable

note right of StreamEngine
  Вложенный компонент:
  обработка потоковых данных
  с датчиков в реальном времени
end note

note right of AnalysisService
  Вложенный компонент:
  обнаружение аномалий и
  статистический анализ
end note

note right of ForecastingService
  Вложенный компонент:
  ML-модели для прогнозирования
  и оценка их точности
end note

note right of NotificationService
  Вложенный компонент:
  генерация и маршрутизация
  предупреждений
end note

@enduml
```

### Скриншот визуализации скрипта

**Диаграмма компонентов:**
![Диаграмма компонентов модуля аналитики и прогнозирования системы EcoGuardian]<img width="2838" height="786" alt="ecoguardian_components" src="https://github.com/user-attachments/assets/1152a4ad-5dcd-460b-8683-62dd4d171f00" />


**Диаграмма классов:**
![Диаграмма классов модуля аналитики и прогнозирования системы EcoGuardian]<img width="1728" height="1323" alt="ecoguardian_classes" src="https://github.com/user-attachments/assets/95a0cfc4-fd0c-4489-9db5-5bf67a9531d7" />


### Пояснения к результату генерации и изменениям

Исходная модель, сгенерированная языковой моделью, создала базовую структуру с пакетом интерфейса пользователя (WebClient, APIGateway), пакетом модуля аналитики с тремя сервисами (движок потоковой обработки, сервис анализа, сервис прогнозирования) и пакетом хранилища данных с одной базой данных. Однако для полного соответствия требованиям технического задания и улучшения качества диаграммы были внесены существенные изменения. Во-первых, добавлен четвертый сервис - сервис оповещений с вложенными компонентами генератора предупреждений и маршрутизации уведомлений, что соответствует функциональному требованию об интеграции с системой оповещений из технического задания. Во-вторых, добавлена вторая база данных (ModelsDB) для разделения операционных данных мониторинга и результатов аналитики, что соответствует требованию к структуре "База моделей и результатов" из ТЗ. В-третьих, внутри каждой базы данных добавлены компоненты-таблицы для детального отображения структуры хранения данных: MonitoringDB содержит таблицы показаний и метаданных датчиков, а ModelsDB - таблицы ML-моделей, прогнозов и результатов анализа. В-четвертых, каждый сервис был детализирован с конкретными подкомпонентами: движок потоковой обработки получил компоненты приема, валидации и агрегации данных, сервис анализа - детектор аномалий и статистический анализ, сервис прогнозирования - ML-модель и оценку точности. Дополнительно был добавлен компонент дашборда визуализации для отображения аналитических данных, улучшены связи между компонентами с указанием конкретных типов взаимодействия (REST API, WebSocket, SQL запросы), добавлены заметки для всех вложенных компонентов и улучшено визуальное оформление. В результате количество компонентов увеличилось с 7 до 20, что значительно превышает минимальное требование, а диаграмма полностью соответствует всем требованиям задания и отражает специфику модуля аналитики и прогнозирования системы EcoGuardian согласно техническому заданию.

---

## Приложение

### Файлы проекта

- `ecoguardian_components.puml` - скрипт PlantUML для генерации диаграммы компонентов
- `ecoguardian_classes.puml` - скрипт PlantUML для генерации диаграммы классов
- `lab3.md` - техническое задание на разработку модуля
- `PROMPT_AND_CHANGES.md` - детальное описание промпта и всех внесенных изменений

### Инструкция по генерации диаграмм

Для генерации изображений диаграмм используйте один из способов:

1. **Онлайн-редактор PlantUML:**
   - Откройте http://www.plantuml.com/plantuml/
   - Скопируйте содержимое файла `ecoguardian_components.puml` или `ecoguardian_classes.puml`
   - Вставьте в редактор и получите изображение

2. **Локальная генерация:**
   ```bash
   plantuml ecoguardian_components.puml
   plantuml ecoguardian_classes.puml
   ```


