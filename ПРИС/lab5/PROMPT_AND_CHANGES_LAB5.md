# Промпт и правки (лабораторная работа 5)

## Использованный промпт для генерации PlantUML

```
Создай UML-диаграмму активностей для модуля аналитики и прогнозирования системы EcoGuardian на языке PlantUML.
Условия:
1) Не менее 6 состояний.
2) Ветвление по корректности пакета и по уровню риска.
3) Покажи стадии: сбор показаний, валидация, агрегация, обогащение контекстом, детекция аномалий, подготовка признаков, загрузка ML-модели, прогноз, оповещения, обновление дашборда, сохранение результатов.
4) Добавь явное логирование ошибки и запрос повтора для некорректных пакетов.
5) Оформление: theme plain, linetype ortho, roundcorner 8.
```

```
Создай UML-диаграмму последовательности для сценария «оператор запрашивает прогноз → система генерирует результат → отправляет оповещение» в EcoGuardian.
Условия:
1) Не менее 3 участников и 6 сообщений.
2) Участники: Operator, Dashboard, API Gateway, Stream Engine, Analysis Service, Forecasting Service, Notification Service, MonitoringDB.
3) Покажи: запрос прогноза, получение агрегатов, добавление аномалий, загрузка модели, возврат прогноза, проверка/логирование уведомлений, обновление дашборда по WebSocket, отправка оператору.
4) Формат взаимодействий пометь (REST, SQL, WebSocket).
5) Оформление: theme plain, linetype ortho, roundcorner 8.
```

## Ручные правки поверх автогенерации

- В диаграмме активностей добавлено отдельное состояние «Обогащение контекстом» и финальное сохранение результатов, чтобы показать полноту конвейера.  
- Ветвления уточнены: разделены проверки валидности пакета и уровня риска, чтобы исключить неоднозначность потоков.  
- В диаграмме последовательности расширен список участников до восьми и добавлено сообщение «Лог доставки», отражающее трассируемость оповещений.  
- Типы взаимодействий обозначены в подписях (REST, SQL, WebSocket) для лучшей читаемости без легенды.

