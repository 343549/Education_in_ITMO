# Отчет по лабораторной работе 5

## Ф.И.О. студента
**Джафари Хоссаин**

## Название практической работы
**Моделирование динамики информационной системы с помощью UML-диаграмм поведения**

## Постановка задачи

Необходимо смоделировать поведение модуля аналитики и прогнозирования системы EcoGuardian с помощью поведенческих UML-диаграмм: диаграммы активностей и диаграммы последовательности. Требования: в диаграмме активностей не менее шести состояний; в диаграмме последовательности не менее трех акторов и шести сообщений. Для каждой диаграммы подготовить пояснения (5–10 предложений), разрешено использовать PlantUML и промпты для генерации, но итоговая модель должна быть вручную доработана; внесенные правки описать.

## Диаграмма активностей обработки данных EcoGuardian

![Диаграмма активностей](ecoguardian_activity_lab5.png)

Диаграмма активностей отражает поток обработки экологических данных от поступления показаний датчиков до доставки уведомлений. После сбора пакетов выполняется валидация; некорректные пакеты логируются с запросом на повторную отправку, что повышает устойчивость. Корректные данные агрегируются по временным окнам и обогащаются контекстом (метаданные датчиков). Далее срабатывает детектор аномалий; при обнаружении фиксируется инцидент и оценивается критичность. Если аномалия не найдена, данные превращаются в признаки для прогнозирования, затем загружается активная ML-модель и рассчитывается риск. При высоком риске формируется оповещение и выбираются каналы доставки; при низком — просто обновляется дашборд в реальном времени. Все результаты (аномалии, прогнозы, оповещения) сохраняются в хранилище, обеспечивая трассируемость и контроль качества.

## Диаграмма последовательности: запрос прогноза и оповещение

![Диаграмма последовательности](ecoguardian_sequence_lab5.png)

Диаграмма последовательности показывает взаимодействие восьми участников: оператор, дашборд, API Gateway, потоковый движок, сервис анализа, сервис прогнозирования, сервис оповещений и база MonitoringDB. Оператор инициирует запрос прогноза через дашборд, который пересылает его в API Gateway. Gateway получает свежие агрегированные данные от потокового движка, тот при необходимости читает их из MonitoringDB. Потоковый движок передает очищенные данные в сервис анализа; аналитика добавляет найденные аномалии к признакам и отправляет их в сервис прогнозирования. Сервис прогнозирования загружает активную ML-модель, вычисляет вероятность риска и возвращает прогноз в API Gateway. При высоком риске сервис оповещений логирует доставку, обновляет дашборд по WebSocket и инициирует отправку уведомлений оператору. В финале дашборд отображает оператору актуальный прогноз и статус оповещений, обеспечивая прозрачность цепочки вызовов.

## Скрипты PlantUML

- `ecoguardian_activity_lab5.puml` — диаграмма активностей  
- `ecoguardian_sequence_lab5.puml` — диаграмма последовательности  
- `PROMPT_AND_CHANGES_LAB5.md` — промпт и перечисление ручных правок

## Инструкция по генерации диаграмм

```bash
plantuml ecoguardian_activity_lab5.puml
plantuml ecoguardian_sequence_lab5.puml
```

## Внесенные ручные правки по сравнению с автогенерацией

- Уточнены ветвления в диаграмме активностей: выделены разветвления по валидности пакета и уровню риска.  
- Добавлена стадия обогащения контекстом и явное сохранение результатов, чтобы показать полноту цикла обработки.  
- В диаграмме последовательности расширен список участников до восьми и добавлен шаг логирования доставки уведомлений для демонстрации трассируемости.  
- Уточнены типы взаимодействий (REST, WebSocket, SQL) и порядок сообщений для связности сценария.

